(this.webpackJsonppixs=this.webpackJsonppixs||[]).push([[0],{21:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),r=c(15),s=c.n(r),o=(c(21),c(5)),i=c(1),l=c.p+"static/media/spr.7dc11467.svg",j=c(0);var u=function(){var e=Object(n.useContext)(m).setAppState;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("nav",{className:"navbar",children:[Object(j.jsx)("h2",{className:"navbar-header",children:"Search Photos"}),Object(j.jsxs)("form",{action:"#",className:"navbar-form",children:[Object(j.jsx)("input",{className:"navbar-input",onChange:function(t){return function(t){e((function(e){return Object(i.a)(Object(i.a)({},e),{},{query:t.target.value})}))}(t)},type:"search",placeholder:"Search"}),Object(j.jsx)("svg",{className:"navbar-input-icon",children:Object(j.jsx)("use",{xlinkHref:"".concat(l,"#icon-search")})})]})]})})},b=c(4),p=c(16),d=c.n(p).a.create({baseURL:"https://www.flickr.com"}),g=function(){var e=Object(n.useContext)(m),t=e.appState,c=t.page,a=t.loading,r=t.responce,s=t.error,o=t.perpage,l=t.query,j=e.setAppState;return Object(n.useEffect)((function(){j((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})})),""!=l?(console.log("query section"),console.log(l),d({method:"GET",url:"/services/rest/",params:{method:"flickr.photos.search",api_key:"09d770a1c3e5e480517dff043f458023",tags:l,per_page:o,page:c,format:"json",nojsoncallback:1}}).then((function(e){return j((function(t){return console.log(e),Object(i.a)(Object(i.a)({},t),{},{responce:e.data.photos,loading:!1})}))})).catch((function(e){j((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},t.error,e))}))}))):(console.log("non query section"),d({method:"GET",url:"/services/rest/",params:{method:"flickr.photos.getRecent",api_key:"09d770a1c3e5e480517dff043f458023",per_page:o,page:c,format:"json",nojsoncallback:1}}).then((function(e){return j((function(t){return Object(i.a)(Object(i.a)({},t),{},{responce:e.data.photos,loading:!1})}))})).catch((function(e){j((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(b.a)({},t.error,e))}))})))}),[c,o,l]),[a,r,s]};var O=function(e){var t=e.img,c=e.title,a=e.show,r=Object(n.useContext)(m).setAppState;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"model",style:a?{display:"block"}:{display:"none"},children:[Object(j.jsx)("img",{className:"model-img",src:t,alt:c}),Object(j.jsx)("button",{className:"model-close-btn",type:"button",onClick:function(){r((function(e){return Object(i.a)(Object(i.a)({},e),{},{show:!1})}))},children:"X"})]})})};var h=function(){var e=g(),t=Object(o.a)(e,3),c=t[0],a=t[1],r=t[2],s=Object(n.useContext)(m),l=s.appState,u=s.setAppState,b=l.selectedImageUrl,p=l.selectedImageTitle,d=l.show,h=Object(n.useRef)(),f=function(e){console.log(e),u((function(t){return Object(i.a)(Object(i.a)({},t),{},{selectedImageUrl:"https://live.staticflickr.com/".concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg"),selectedImageTitle:e.title,show:!0})}))},x=Object(n.useCallback)((function(e){c||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&u((function(e){return Object(i.a)(Object(i.a)({},e),{},{page:e.page+1,perpage:e.perpage+20})}))}),[c]),e&&h.current.observe(e))}));return r?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("h1",{children:r.message})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("main",{className:"content",children:a&&a.photo.map((function(e,t){var c=e.title,n=e.id,r=e.server,s=e.secret;return a.photo.length===t+1?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("figure",{onClick:function(){return f(e)},ref:x,className:"content-image-container",children:[Object(j.jsx)("img",{src:"https://live.staticflickr.com/".concat(r,"/").concat(n,"_").concat(s,".jpg"),alt:c,className:"content-image"}),Object(j.jsx)("figcaption",{children:c})]},n)}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("figure",{onClick:function(){return f(e)},className:"content-image-container",children:[Object(j.jsx)("img",{src:"https://live.staticflickr.com/".concat(r,"/").concat(n,"_").concat(s,".jpg"),alt:c,className:"content-image"}),Object(j.jsx)("figcaption",{children:c})]},n)})}))}),Object(j.jsx)(O,{img:b,title:p,show:d})]})},m=a.a.createContext();var f=function(){var e=Object(n.useState)({responce:null,loading:!0,error:"",query:"",page:1,perpage:20,selectedImageUrl:"",selectedImageTitle:"",show:!1}),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(j.jsx)(m.Provider,{value:{appState:c,setAppState:a},children:Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{}),Object(j.jsx)(h,{})]})})};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.90e7dc2f.chunk.js.map