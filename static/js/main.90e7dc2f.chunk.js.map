{"version":3,"sources":["assets/spr.svg","Components/Header.jsx","APIs/Flickr.js","Components/Custom/customFetchHook.js","Components/model.jsx","Components/Content.jsx","App.js","index.js"],"names":["Header","setAppState","useContext","AppState","className","action","onChange","e","prevState","query","target","value","handleChange","type","placeholder","xlinkHref","svg","Flickr","axios","create","baseURL","useFetchApi","appState","page","loading","responce","error","perpage","useEffect","console","log","method","url","params","api_key","tags","per_page","format","nojsoncallback","then","data","photos","catch","Model","img","title","show","style","display","src","alt","onClick","Content","selectedImageUrl","selectedImageTitle","observer","useRef","handleClick","item","server","id","secret","lastElement","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","message","photo","map","index","length","ref","React","createContext","App","useState","Provider","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.90e7dc2f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/spr.7dc11467.svg\";","import React, { useContext } from \"react\";\nimport svg from \"../assets/spr.svg\";\nimport { AppState } from \"../App\";\n\nfunction Header() {\n  const { setAppState } = useContext(AppState);\n  const handleChange = (e) => {\n    setAppState((prevState) => {\n      return { ...prevState, query: e.target.value };\n    });\n  };\n\n  return (\n    <>\n      <nav className=\"navbar\">\n        <h2 className=\"navbar-header\">Search Photos</h2>\n        <form action=\"#\" className=\"navbar-form\">\n          <input\n            className=\"navbar-input\"\n            onChange={(e) => handleChange(e)}\n            type=\"search\"\n            placeholder=\"Search\"\n          />\n          <svg className=\"navbar-input-icon\">\n            <use xlinkHref={`${svg}#icon-search`} />\n          </svg>\n        </form>\n      </nav>\n    </>\n  );\n}\n\nexport default Header;\n","import axios from \"axios\";\n\nexport const Flickr = axios.create({\n  baseURL: \"https://www.flickr.com\",\n});\n","import { useEffect, useContext } from \"react\";\nimport { Flickr } from \"../../APIs/Flickr\";\nimport { AppState } from \"../../App\";\n\nconst useFetchApi = () => {\n  const {\n    appState: { page, loading, responce, error, perpage, query },\n    setAppState,\n  } = useContext(AppState);\n\n  useEffect(() => {\n    setAppState((prevState) => {\n      return { ...prevState, loading: true };\n    });\n\n    if (query != \"\") {\n      console.log(\"query section\");\n      console.log(query);\n      Flickr({\n        method: \"GET\",\n        url: \"/services/rest/\",\n        params: {\n          method: \"flickr.photos.search\",\n          api_key: \"09d770a1c3e5e480517dff043f458023\",\n          tags: query,\n          per_page: perpage,\n          page: page,\n          format: \"json\",\n          nojsoncallback: 1,\n        },\n      })\n        .then((responce) =>\n          setAppState((prevState) => {\n            console.log(responce);\n            return {\n              ...prevState,\n              responce: responce.data.photos,\n              loading: false,\n            };\n          })\n        )\n        .catch((error) => {\n          setAppState((prevState) => {\n            return { ...prevState, [prevState.error]: error };\n          });\n        });\n    } else {\n      console.log(\"non query section\");\n      Flickr({\n        method: \"GET\",\n        url: \"/services/rest/\",\n        params: {\n          method: \"flickr.photos.getRecent\",\n          api_key: \"09d770a1c3e5e480517dff043f458023\",\n          per_page: perpage,\n          page: page,\n          format: \"json\",\n          nojsoncallback: 1,\n        },\n      })\n        .then((responce) =>\n          setAppState((prevState) => {\n            return {\n              ...prevState,\n              responce: responce.data.photos,\n              loading: false,\n            };\n          })\n        )\n        .catch((error) => {\n          setAppState((prevState) => {\n            return { ...prevState, [prevState.error]: error };\n          });\n        });\n    }\n  }, [page, perpage, query]);\n\n  return [loading, responce, error];\n};\n\nexport default useFetchApi;\n","import React, { useContext } from \"react\";\nimport { AppState } from \"../App\";\n\nfunction Model({ img, title, show }) {\n  const { setAppState } = useContext(AppState);\n\n  const handleClick = () => {\n    setAppState((prevState) => {\n      return { ...prevState, show: false };\n    });\n  };\n\n  return (\n    <>\n      <div\n        className=\"model\"\n        style={show ? { display: \"block\" } : { display: \"none\" }}\n      >\n        <img className=\"model-img\" src={img} alt={title} />\n        <button\n          className=\"model-close-btn\"\n          type=\"button\"\n          onClick={() => handleClick()}\n        >\n          X\n        </button>\n      </div>\n    </>\n  );\n}\n\nexport default Model;\n","import React, { useRef, useCallback, useContext } from \"react\";\nimport useFetchApi from \"./Custom/customFetchHook\";\nimport { AppState } from \"../App\";\nimport Model from \"./model\";\n\nfunction Content() {\n  const [loading, responce, error] = useFetchApi();\n\n  const { appState, setAppState } = useContext(AppState);\n\n  const { selectedImageUrl, selectedImageTitle, show } = appState;\n\n  const observer = useRef();\n\n  const handleClick = (item) => {\n    console.log(item);\n    setAppState((prevState) => {\n      return {\n        ...prevState,\n        selectedImageUrl: `https://live.staticflickr.com/${item.server}/${item.id}_${item.secret}.jpg`,\n        selectedImageTitle: item.title,\n        show: true,\n      };\n    });\n  };\n\n  const lastElement = useCallback((node) => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          setAppState((prevState) => {\n            return {\n              ...prevState,\n              page: prevState.page + 1,\n              perpage: prevState.perpage + 20,\n            };\n          });\n        }\n      },\n      [loading]\n    );\n\n    if (node) observer.current.observe(node);\n  });\n\n  if (error) {\n    return (\n      <>\n        <h1>{error.message}</h1>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <main className=\"content\">\n        {responce &&\n          responce.photo.map((item, index) => {\n            const { title, id, server, secret } = item;\n\n            if (responce.photo.length === index + 1) {\n              return (\n                <>\n                  <figure\n                    onClick={() => handleClick(item)}\n                    key={id}\n                    ref={lastElement}\n                    className=\"content-image-container\"\n                  >\n                    <img\n                      src={`https://live.staticflickr.com/${server}/${id}_${secret}.jpg`}\n                      alt={title}\n                      className=\"content-image\"\n                    />\n                    <figcaption>{title}</figcaption>\n                  </figure>\n                </>\n              );\n            } else {\n              return (\n                <>\n                  <figure\n                    onClick={() => handleClick(item)}\n                    key={id}\n                    className=\"content-image-container\"\n                  >\n                    <img\n                      src={`https://live.staticflickr.com/${server}/${id}_${secret}.jpg`}\n                      alt={title}\n                      className=\"content-image\"\n                    />\n                    <figcaption>{title}</figcaption>\n                  </figure>\n                </>\n              );\n            }\n          })}\n      </main>\n      <Model img={selectedImageUrl} title={selectedImageTitle} show={show} />\n    </>\n  );\n}\n\nexport default Content;\n\n//Changes\n","import React, { useState } from \"react\";\nimport Header from \"./Components/Header\";\nimport Content from \"./Components/Content\";\n\nexport const AppState = React.createContext();\n\nfunction App() {\n  const [appState, setAppState] = useState({\n    responce: null,\n    loading: true,\n    error: \"\",\n    query: \"\",\n    page: 1,\n    perpage: 20,\n    selectedImageUrl: \"\",\n    selectedImageTitle: \"\",\n    show: false,\n  });\n\n  return (\n    <AppState.Provider value={{ appState, setAppState }}>\n      <div className=\"App\">\n        <Header />\n        <Content />\n      </div>\n    </AppState.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./Css/index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}